<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
    <style>
        body {
            font-family: Arial;
            text-align: center;
            margin-top: 40px;
            background: #f4f6f9;
        }

        .box {
            width: 450px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        input {
            width: 90%;
            padding: 8px;
            margin: 6px 0;
        }

        button {
            padding: 8px 12px;
            margin: 5px;
            cursor: pointer;
        }

        table {
            width: 100%;
            margin-top: 15px;
            border-collapse: collapse;
        }

        th, td {
            border: 1px solid #ccc;
            padding: 6px;
        }
    </style>
</head>
<body>

<div class="box">
    <h2>Expense Tracker</h2>

    <input type="text" id="title" placeholder="Expense Title">
    <input type="number" id="amount" placeholder="Amount">
    <input type="date" id="date">

    <br>

    <button onclick="addExpense()">Add Expense</button>
    <button onclick="viewExpenses()">View Expenses</button>
    <button onclick="deleteExpense()">Delete Expense</button>

    <div id="output"></div>
</div>

<script>

    // Open Database
    var db = openDatabase("ExpenseDB", "1.0", "Expense Database", 2 * 1024 * 1024);

    // Create Table (Transaction)
    db.transaction(function(tx) {

        tx.executeSql(
            "CREATE TABLE IF NOT EXISTS expenses (id INTEGER PRIMARY KEY AUTOINCREMENT, title TEXT, amount REAL, date TEXT)",
            [],
            function() { console.log("Table created successfully"); },
            function(tx, error) { alert("Table creation error: " + error.message); }
        );

    });

    // Add Expense
    function addExpense() {

        var title = document.getElementById("title").value;
        var amount = document.getElementById("amount").value;
        var date = document.getElementById("date").value;

        db.transaction(function(tx) {

            tx.executeSql(
                "INSERT INTO expenses (title, amount, date) VALUES (?, ?, ?)",
                [title, amount, date],
                function() {
                    alert("Expense Added Successfully");
                },
                function(tx, error) {
                    alert("Insert Error: " + error.message);
                }
            );

        });
    }

    // View Expenses
    function viewExpenses() {

        db.transaction(function(tx) {

            tx.executeSql(
                "SELECT * FROM expenses",
                [],
                function(tx, results) {

                    var rows = results.rows;
                    var html = "<table><tr><th>ID</th><th>Title</th><th>Amount</th><th>Date</th></tr>";

                    for (var i = 0; i < rows.length; i++) {

                        html += "<tr>" +
                                "<td>" + rows.item(i).id + "</td>" +
                                "<td>" + rows.item(i).title + "</td>" +
                                "<td>" + rows.item(i).amount + "</td>" +
                                "<td>" + rows.item(i).date + "</td>" +
                                "</tr>";
                    }

                    html += "</table>";

                    document.getElementById("output").innerHTML = html;
                },
                function(tx, error) {
                    alert("Select Error: " + error.message);
                }
            );

        });
    }

    // Delete Expense (by ID)
    function deleteExpense() {

        var id = prompt("Enter Expense ID to Delete:");

        db.transaction(function(tx) {

            tx.executeSql(
                "DELETE FROM expenses WHERE id = ?",
                [id],
                function() {
                    alert("Expense Deleted Successfully");
                },
                function(tx, error) {
                    alert("Delete Error: " + error.message);
                }
            );

        });
    }

</script>

</body>
</html>
